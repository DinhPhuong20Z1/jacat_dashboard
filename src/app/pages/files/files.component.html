<nb-card>
    <nb-card-body>
        <label class="search-label" for="search">Search:</label>
        <input
            nbInput
            [nbFilterInput]="dataSource"
            id="search"
            class="search-input"
        />

        <table
            [nbTreeGrid]="dataSource"
            [nbSort]="dataSource"
            (sort)="updateSort($event)"
        >
            <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef="allColumns"></tr>
            <tr
                nbTreeGridRow
                *nbTreeGridRowDef="let row; columns: allColumns"
            ></tr>

            <ng-container [nbTreeGridColumnDef]="customColumn">
                <th
                    nbTreeGridHeaderCell
                    [nbSortHeader]="getSortDirection(customColumn)"
                    *nbTreeGridHeaderCellDef
                >
                    {{ customColumn }}
                </th>
                <td
                    nbTreeGridCell
                    *nbTreeGridCellDef="let row"
                    (drop)="onDrop($event, dialog, row)"
                    (dragover)="onDragOver($event)"
                    (dblclick)="onClick(dialogDetail, row)"
                >
                    <ngx-fs-icon
                        [kind]="row.data.kind"
                        [expanded]="row.expanded"
                    ></ngx-fs-icon>

                    {{ row.data[customColumn] }}
                </td>
            </ng-container>

            <ng-container
                *ngFor="let column of defaultColumns; let index = index"
                [nbTreeGridColumnDef]="column"
                [showOn]="getShowOn(index)"
            >
                <th
                    nbTreeGridHeaderCell
                    [nbSortHeader]="getSortDirection(column)"
                    *nbTreeGridHeaderCellDef
                >
                    {{ column }}
                </th>
                <td nbTreeGridCell *nbTreeGridCellDef="let row">
                    {{ row.data[column] || "-" }}
                </td>
            </ng-container>
            <ng-container [nbTreeGridColumnDef]="deleteColums">
                <th>
                    {{ deleteColums }}
                </th>
                <td>
                    <nb-icon icon="activity-outline"></nb-icon>
                </td>
            </ng-container>
        </table>
    </nb-card-body>
</nb-card>

<ng-template #dialog let-data let-ref="dialogRef">
    <nb-card class="dialog">
        <nb-card-header>Thông tin tải lên</nb-card-header>
        <nb-card-body class="example-items-col">
            <form>
                <div class="form-group row">
                    <label for="Name" class="label col-sm-3 col-form-label"
                        >Name</label
                    >
                    <div class="col-sm-9">
                        <input
                            type="text"
                            nbInput
                            fullWidth
                            status="basic"
                            placeholder="Name"
                        />
                    </div>
                </div>
                <div class="form-group row">
                    <label for="Game" class="label col-sm-3 col-form-label"
                        >Game_version</label
                    >
                    <div class="col-sm-9">
                        <input
                            type="text"
                            nbInput
                            fullWidth
                            status="basic"
                            placeholder="Game_version"
                        />
                    </div>
                </div>
                <div class="form-group row">
                    <label for="Database" class="label col-sm-3 col-form-label"
                        >Database_version</label
                    >
                    <div class="col-sm-9">
                        <input
                            type="text"
                            nbInput
                            fullWidth
                            status="basic"
                            placeholder="Database_version"
                        />
                    </div>
                </div>
            </form>
        </nb-card-body>

        <nb-card-footer class="dialog">
            <button
                class="cancel"
                nbButton
                status="danger"
                (click)="ref.close()"
            >
                Đóng
            </button>
            <button
                nbButton
                status="success"
                (click)="showToast(positions.TOP_RIGHT, 'success', ref.close())"
            >
                Tải lên
            </button>
        </nb-card-footer>
    </nb-card>
</ng-template>

<ng-template #dialogDetail let-data let-ref="dialogRef">
    <nb-card class="dialog">
        <nb-card-header>Thông tin thêm</nb-card-header>
        <nb-card-body class="example-items-col">
            <div class="infor-item">
                <div class="infor-name">App Name:</div>
                <div class="infor-content">{{ deleteId.name }}</div>
            </div>
            <div class="infor-item">
                <div class="infor-name">Version Name:</div>
                <div class="infor-content">{{ deleteId.kind }}</div>
            </div>
            <div class="infor-item">
                <div class="infor-name">Dung lượng:</div>
                <div class="infor-content">{{ deleteId.size }}</div>
            </div>
        </nb-card-body>

        <nb-card-footer class="dialog">
            <button
                class="cancel"
                nbButton
                status="danger"
                (click)="ref.close()"
            >
                Đóng
            </button>

            <button nbButton status="danger" (click)="delete(ref.close())">
                Xóa
            </button>
            <button
                class="download"
                nbButton
                status="success"
                (click)="download(positions.TOP_RIGHT, 'success', ref.close())"
            >
                Tải xuống
            </button>
        </nb-card-footer>
    </nb-card>
</ng-template>

<ng-template #loadingTmpl>{{ loading }}</ng-template>


